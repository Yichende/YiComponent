.button {
  --pixel-size: 2px;
  --main-color: #4a90e2;
  --highlight: #6aa8ff;
  --shadow: #2c6cb0;
  
  font-family: inherit;
  position: relative;
  border-radius: 0;
  border: none;
  padding: 12px 24px;
  background: var(--main-color);
  cursor: pointer;
  transition: all 0.1s ease;
  margin: 4px;
  
  /* 像素边框效果 */
  box-shadow: 
    calc(var(--pixel-size) * 2) calc(var(--pixel-size) * 2) 0 var(--shadow),
    var(--pixel-size) var(--pixel-size) 0 var(--shadow),
    inset calc(-1 * var(--pixel-size)) calc(-1 * var(--pixel-size)) 0 var(--shadow),
    inset var(--pixel-size) var(--pixel-size) 0 var(--highlight);
}

.content {
  position: relative;
  font-family: inherit;
  color: white;
  text-shadow: 1px 1px 0 var(--shadow);
  display: inline-block;
  vertical-align: middle;
}

/* 交互状态 */
.button:not(:disabled):active {
  transform: translate(2px, 2px);
  box-shadow: 
    var(--pixel-size) var(--pixel-size) 0 var(--shadow),
    inset calc(-1 * var(--pixel-size)) calc(-1 * var(--pixel-size)) 0 var(--shadow),
    inset var(--pixel-size) var(--pixel-size) 0 var(--highlight);
}

/* 悬停效果 */
.button:not(:disabled):hover {
  filter: brightness(1.1);
}

/* 禁用状态 */
.button:disabled {
  opacity: 0.6;
  background: #666;
  --main-color: #666;
  --highlight: #888;
  --shadow: #444;
  transform: none;
  cursor: not-allowed;
}

.button:disabled .loadingContent {
  animation: pixelBounce 0.8s infinite ease-in-out !important;
  position: relative; /* 创建新的堆叠上下文 */
  z-index: 1; /* 确保动画层级高于父级 */
}

/* 尺寸控制 */
.sm {
  padding: 6px 12px;
  font-size: 10px;
  --dot-size: 3px;
  --dot-spacing: 1px;
}

.md {
  padding: 8px 16px;
  font-size: 12px;
  --dot-size: 4px;
  --dot-spacing: 2px;
}

.lg {
  padding: 10px 20px;
  font-size: 14px;
  --dot-size: 5px;
  --dot-spacing: 3px;
}

/* 可选：不同颜色变体 */
.primary {
  --main-color: #4a90e2;
  --highlight: #6aa8ff;
  --shadow: #2c6cb0;
}

.warning {
  --main-color: #e24a4a;
  --highlight: #ff6a6a;
  --shadow: #b02c2c;
}

.success {
  --main-color: #4ae24a;
  --highlight: #6aff6a;
  --shadow: #2cb02c;
}

/* Loading 动画 */
@keyframes pixelBounce {
  0%, 100% { 
    transform: translateY(0);
    animation-timing-function: cubic-bezier(0.5, 0, 1, 1);
  }
  50% { 
    transform: translateY(calc(-1 * var(--dot-size)));
    animation-timing-function: cubic-bezier(0, 0, 0.5, 1);
  }
}

.loader {
  --jump-height: calc(-1 * var(--dot-size));
  display: inline-flex;
  align-items: center;
  animation: pixelBounce 0.8s infinite ease-in-out;
  margin-right: 8px;
}

/* 创建三个像素点 */
.loader::before,
.loader::after,
.loader span {
  content: '';
  display: block;
  width: var(--dot-size);
  height: var(--dot-size);
  margin: 0 var(--dot-spacing);
  background: currentColor;
  box-shadow: 1px 1px 0 var(--shadow);
}

/* 第一个点 */
.loader::before {
  animation: pixelBounce 0.8s infinite ease-in-out;
}

/* 第二个点（使用伪元素生成） */
.loader::after {
  animation: pixelBounce 0.8s 0.2s infinite ease-in-out;
}

/* 第三个点（通过空元素生成） */
.loader span {
  display: block;
  width: var(--dot-size);
  height: var(--dot-size);
  margin: 0 var(--dot-spacing);
  background: currentColor;
  box-shadow: 1px 1px 0 var(--shadow);
  animation: pixelBounce 0.8s 0.4s infinite ease-in-out;
}

/* Loading 状态文字调整 */
.loadingContent {
  font-size: 1em;
  opacity: 0.8;
  vertical-align: middle;
}

.button:disabled .content {
  animation: none;
}

.iconLeft {
  margin-right: 8px;
}

.iconRight {
  margin-left: 8px;
}